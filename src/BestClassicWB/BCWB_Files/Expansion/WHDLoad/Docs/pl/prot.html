<HTML>
<HEAD>
<TITLE>Korzystanie z resload_Protect#?</TITLE>
<meta name="DC.Language" content="pl">
<meta http-equiv="content-language" content="pl">
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
<!-- $Id: prot.html 1.6 2014/12/04 23:37:38 wepl Exp wepl $ -->
</HEAD>
<BODY>
<h3>Korzystanie z resload_Protect#?</h3>
<h4>Teoria</h4>
Istnieje wiele sytuacji, w których mo¿e byæ bardzo u¿yteczne zdobycie
informacji kiedy zainstalowany program próbuje dostaæ siê do specyficznych
obszarów pamiêci.
Przy pomocy funkcji <a href="../autodoc.html">resload_Protect#?</a>
jest mo¿liwa chrona pewnych obszarów pamiêci przed zapisem i/lub odczytem.
Ochrona oznacza tyle, ¿e ka¿dy dostêp do takiego chronionego obszaru wygeneruje
wyj±tek b³êdu dostêpu, który zostanie wy¶wietlony w stosownym komunikacie.
Je¿eli zadeklarujemy obszar pamiêci jako chroniony, wykorzystanie funkcji
<a href="../autodoc.html">resload_Protect#?</a> spowoduje, ¿e
WHDLoad zmodyfikuje opisuj±c± stronê pamiêci w drzewo t³umaczeñ MMU.
Od teraz ka¿da próba dostêpu procesora do chronionej strony pamiêci wygeneruje
wyj±tek b³êdu dostêpu. WHDLoad i jego wewnêtrzne procedury zweryfikuj± powód
wyst±pienia wyj±tku. Je¿eli powodem by³ dostêp do chronionej
<a href="mmu.html">strony</a> pamiêci, lecz dostêp nie odpowiada chronionemu
obszarowi, dostêp zostanie zaemulowany i program bêdzie wykonywany dalej.
W przeciwnym wypadku WHDLoad powróci do systemu ze stosownym komunikatem.
Je¿eli dostêp by³ dostêpem do strumienia instrukcji (procesor próbuje
za³adowaæ kod), zawsze nast±pi emulacja. Innymi s³owy funkcja
<a href="../autodoc.html">resload_Protect#?</a> oddzia³uje tylko
na odczyt i zapis danych. W rzeczywisto¶ci ka¿dy dostêp do chronionej strony
pamiêci (rozmiar strony pamiêci obecnie wynosi 4096) utworzy b³±d dostêpu,
nawet wtedy, gdy chroniony obszar ma rozmiar 1 bajta powoduj±c du¿e spowolnienie
w wykonywaniu programu. W szczególno¶ci gdy czê¶æ kodu znajduje siê na tej samej stronie.
Je¶li program zale¿y od szybko¶ci wykonywania, s± mo¿liwe ró¿nice w dzia³aniu programu.
Dlatego te¿ jest mo¿liwe, ¿e niektóre porogramy nie bêd± dzia³a³y poprawnie z w³±czon±
opcj± resload_Protect.

<h4>Przyk³ad</h4>
Je¿eli instalujesz grê przy pomocy pakietu WHDLoad, musisz za³ataæ oryginalny
kod wczytuj±cy gry w taki sposób, aby skorzysta³ on z WHDLoada do wczytywania danych.
Niektóre gry sprawdzaj± sumy kontrolne pewnych obszarów kodu, aby wykryæ,
czy oryginalny kod by³ modyfikowany. Czasami jest je ciê¿ko znale¼æ.
Wykorzystuj±c funkcjê <a href="../autodoc.html">resload_Protect#?</a>
bêdzie to proste. Nale¿y tylko chroniæ bajty, które siê zmienia³o w kodzie
gry. Od teraz ka¿da procedura, która próbuje sprawdziæ sumê kontroln± i odczytuje
Twój zmodyfikowany kod, wygeneruje b³±d dostêpu, a Ty ju¿ bêdziesz wiedzia³,
gdzie ona siê znajduje.

<h4>Ograniczenia</h4>
Nie wolno chroniæ stron pamiêci, na których znajduj± siê punkty SSP. Je¿eli tak
zrobisz, nast±pi &quot;wyj±tek&quot;, którego efektem bêdzie &quot;podwójny b³±d szyny&quot;, gdy¿
procesor nie bêdzie w stanie zapisaæ ramki stosu wyj±tku.
Po &quot;podwójnym b³êdzie szyny&quot; nale¿y wykonaæ reset. WHDload
sprawdza, czy wystêpuj± konflikty pomiêdzy chronionymi obszarami, a SSP,
i w takim przypadku przerywa dzia³anie, lecz to nie pomo¿e, je¶li SSP
zostanie zmieniony pó¼niej.

<p>Wiêcej informacji znajdziesz w plikach Autodoc dla poszczególnych funkcji resload_Protect:
<ul>
<li><a href="../autodoc.html#resload_ProtectRead">resload_ProtectRead</a>
<li><a href="../autodoc.html#resload_ProtectReadWrite">resload_ProtectReadWrite</a>
<li><a href="../autodoc.html#resload_ProtectRemove">resload_ProtectRemove</a>
<li><a href="../autodoc.html#resload_ProtectSMC">resload_ProtectSMC</a>
<li><a href="../autodoc.html#resload_ProtectWrite">resload_ProtectWrite</a>
</ul>
</BODY>
</HTML>
